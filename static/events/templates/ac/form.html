{% extends 'spoken/templates/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block title %}New Institution{% endblock %}
{% block heading %}
    <i class="fa fa-list-ul"></i> New Institution
{% endblock %}
{% block cssblock %}
<style type="text/css">
	
</style>

{% endblock %}
{% block content %}
    <div class="row well">
        <div class='col-12'>
            <form action="{% url 'events:upload_ac_csv' %}" method="post" enctype="multipart/form-data" class="form-horizontal">
                {% csrf_token %}
                {{ form_csv }}
                <button type="submit" class="btn btn-primary m-4" style="margin-top: 12px;">upload csv</button>
            </form>
        </div>
        <div class="alert alert-info col-12" style="margin-top: 12px;">
  <h4>CSV Upload Instructions</h4>
  <ol>
    <li>
      Use the following column headers, in the <strong>exact order and with exact spellings</strong>:<br>
      <code>
        institution_name, state, district, city, address, pincode, institution_type, institute_category, university,<br>
        contact_person,resource_center, ratings, remarks, status<br>
        
      </code>
    </li>
    <li>
      <strong>Do not change column names or their sequence.</strong>
    </li>
    <li>
      If a value contains a comma <code>(,)</code>, enclose it in <strong>double quotes</strong> <code>("")</code>.<br>
      <b>Example:</b><br>
      <code>
        "Institute of Physics, Pune",Maharashtra,Pune, Pune, "Plot 21, Industrial Area, MIDC",411001, School, Uncategorised,  Central Board of Secondary education,
        Ankita 999999999 ankita@samtafoundation.com, no,1,no remarks,1
      </code>
    </li>
    <li>
      Save your file with a <code>.csv</code> extension and ensure it's UTF-8 encoded.
    </li>
  </ol>
  <div>
    <div class="alert alert-warning col-12" style="margin-top: 12px;">
        <p>
        To ensure that the fields — State, District, City, Institute Type, Institute Category, and University — exactly match the values in our database, please <strong>use the provided Google Sheet</strong> (link below). The sheet includes dropdowns for these fields to maintain correct data entry.<br/>
        Make a copy of the sheet (ensure you are logged into Google), fill in your data, download it as a CSV file, and then upload it here.
        </p>

        <strong><a href="{{ academic_csv_template }}" target="_blank">CSV Template Link</a></strong>
  </p>
    </div>
  </div>
  
</div>

    </div>
    <div class="row well">
        <div class='col-sm-8'>
            <p><strong>Add Individual Academic Center</strong></p>
            <form action="{{ action }}" method="post" class='form-horizontal'>{% csrf_token %}
                {% with WIDGET_ERROR_CLASS='field-error' WIDGET_REQUIRED_CLASS='field-required' %}
                    {% if form.non_field_errors %}
                    <ul>
                      {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                      {% endfor %}
                    </ul>
                    {% endif %}
                    {{ form.errors }}
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_state">State</label>
                        <div class="col-sm-9">
                            {% render_field form.state class+="form-control  state" tabindex="1" data-placeholder="Choose state" %}
                            {{ form.state.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_university">University / Affiliated Board <span class='ajax-refresh ajax-refresh-university'><i class="fa fa-2 fa-refresh fa-spin"></i></span></label>
                        <div class="col-sm-9">
                            {% render_field form.university class+="form-control  university" tabindex="1" data-placeholder="Choose university" %}
                            {{ form.university.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_institution_name">Institution Name</label>
                        <div class="col-sm-9">
                            {% render_field form.institution_name class+="form-control institution_name" tabindex="1" data-placeholder="Enter institution name" %}
                            {{ form.institution_name.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_institution_type">Institute Type</label>
                        <div class="col-sm-9">
                            {% render_field form.institution_type class+="form-control  institution_type" tabindex="1" data-placeholder="Choose Institution Type" %}
                            {{ form.institution_type.errors }}
                        </div>
                    </div>
                    <!--
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_institution_type">Govt / Govt-Aided/Private</label>
                        <div class="col-sm-9">
                            {% render_field form.institute_category class+="form-control  institute_category" tabindex="1" data-placeholder="Choose Institute Category" %}
                            {{ form.institute_category.errors }}
                        </div>
                    </div>
                -->
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_district">District <span class='ajax-refresh ajax-refresh-district'><i class="fa fa-2 fa-refresh fa-spin"></i></span></label>
                        <div class="col-sm-9">
                            {% render_field form.district class+="form-control  district" tabindex="1" data-placeholder="Choose district" %}
                            {{ form.district.errors }}
                        </div>
                    </div>
                    <!-- <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_location">Location <span class='ajax-refresh ajax-refresh-location'><i class="fa fa-2 fa-refresh fa-spin"></i></span></label>
                        <div class="col-sm-9">
                            {% render_field form.location class+="form-control  location" tabindex="1" data-placeholder="Choose location" %}
                            {{ form.location.errors }}
                        </div>
                    </div> -->
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_state">City <span class='ajax-refresh ajax-refresh-city'><i class="fa fa-2 fa-refresh fa-spin"></i></span></label>
                        <div class="col-sm-9">
                            {% render_field form.city class+="form-control  city" tabindex="1" data-placeholder="Choose city" %}
                            {{ form.city.errors }}
                        </div>
                    </div>
                    <!--<div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_street">Street</label>
                        <div class="col-sm-9">
                            {% render_field form.street class+="form-control street" tabindex="1" data-placeholder="Enter street" %}
                            {{ form.street.errors }}
                        </div>
                    </div> -->
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_street">Address</label>
                        <div class="col-sm-9">
                            <small style="color:#25981E;"><b>Please enter the complete postal address including pincode.</b></small>
                            {% render_field form.address class+="form-control street" tabindex="1" data-placeholder="Enter street" %}
                            {{ form.address.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_pincode">Pincode</label>
                        <div class="col-sm-9">
                            {% render_field form.pincode class+="form-control pincode" tabindex="1" data-placeholder="Enter pincode" %}
                            {{ form.pincode.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_resource_center">Resource Center</label>
                        <div class="col-sm-9">
                            {% render_field form.resource_center class+="form-control resource_center" tabindex="1" %}
                            {{ form.resource_center.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_rating">Ratings</label>
                        <div class="col-sm-9">
                            {% render_field form.rating class+="form-control rating" tabindex="1" %}
                            {{ form.rating.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_contact_person">Contact Person</label>
                        <div class="col-sm-9">
                            {% render_field form.contact_person class+="form-control contact_person" tabindex="1" data-placeholder="Contact details" %}
                            {{ form.contact_person.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_remarks">Remarks</label>
                        <div class="col-sm-9">
                            {% render_field form.remarks class+="form-control remarks" tabindex="1" %}
                            {{ form.remarks.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for= "id_status">Status</label>
                        <div class="col-sm-9">
                            {% render_field form.status class+="form-control status" tabindex="1" data-placeholder="Contact details" %}
                            {{ form.status.errors }}
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9">
                            <input class="btn btn-primary" type="submit" value="Submit" />
                        </div>
                    </div>
                {% endwith %}
            </form>
        </div>
    </div>


{% endblock %}
{% block compressjsblock %}
    <script src="{% static 'spoken/js/events.js' %}"></script>
{% endblock %}
{% block compressinlinejsblock %}
    <script>
        $("#id_state").change(function(){
            ajaxStrateFillDatas('district', 'city', 'university');
        });
        $('.district').change(function(){
            ajaxDistrictFillDatas('location', '', $(this).val());
        });
    </script>
{% endblock %}

