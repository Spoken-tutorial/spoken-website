{% extends 'spoken/templates/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% load creationdata %}
{% block title %} Add/Edit Testimonial{% endblock %}
{% block heading %}Add / Edit Testimonial{% endblock %}
{% block search %}{% endblock %}
{% block content %}
    <div class="row well">
        <div class='col-sm-8'>
            {% if form %}
	        <form action="{{ action }}" method="post" class='form-horizontal' enctype="multipart/form-data">{% csrf_token %}
		        {% with WIDGET_ERROR_CLASS='field-error' WIDGET_REQUIRED_CLASS='field-required' %}
			        {% if form.non_field_errors %}
			        <ul>
			          {% for error in form.non_field_errors %}
				        <li>{{ error }}</li>
			          {% endfor %}
			        </ul>
			        {% endif %}
			        <div class="form-group">
				        <label for="id_user_name" class="col-sm-3 control-label">Full Name and Organisation</label>
				        <div class="col-sm-9">
				            {% render_field form.user_name class+="form-control user_name" tabindex="1" %}
				            {{ form.user_name.errors }}
				            <small>Provide the Person Full Name and Organisation he belongs. For example : <strong>Mr.XYZ, ABC College of Engineering</strong></small>
			            </div>
			        </div>
			        <div class="form-group">
				        <label for="id_state" class="col-sm-3 control-label">Actual Content</label>
				        <div class="col-sm-9">
				            {% render_field form.actual_content class+="form-control actual_content" tabindex="1" %}
				            {{ form.actual_content.errors }}
				            <small>Provide the whole content of the Testimonial</small>
			            </div>
			        </div>
			         <div class="form-group">
				        <label for="id_state" class="col-sm-3 control-label">Minified Content</label>
				        <div class="col-sm-9">
				            {% render_field form.minified_content class+="form-control minified_content" tabindex="1"%}
				            {{ form.minified_content.errors }}
				            <small>Provide the short content of the Testimonial</small>
			            </div>
			        </div>
			         <div class="form-group">
				        <label for="id_state" class="col-sm-3 control-label">Component Type</label>
				        <div class="col-sm-9">
				            {% render_field form.compn_type class+="form-control compn_type" tabindex="1" %}
				            {{ form.compn_type.errors }}
				            <small>Please select the type of component for the testimonial.</small>
			            </div>
			        </div>
			        <div class="form-group">
				        <label for="id_state" class="col-sm-3 control-label">Upload File</label>
				        <div class="col-sm-9">
				            {% render_field form.source class+="form-control source" tabindex="1" %}
				            {{ form.source.errors }}
				            <small id='cmpnt_desc' >Upload the file for the Testimonial.</small>
			            </div>
			        </div>
			         <div class="form-group">
				        <label for="id_state" class="col-sm-3 control-label">Source Title</label>
				        <div class="col-sm-9">
				            {% render_field form.source_title class+="form-control source_title" tabindex="1" %}
				            {{ form.source_title.errors }}
			            </div>
			        </div>
			         <div class="form-group">
				        <label for="id_state" class="col-sm-3 control-label">Source Link</label>
				        <div class="col-sm-9">
				            {% render_field form.source_link class+="form-control source_link" tabindex="1" %}
				            {{ form.source_link.errors }}
			            </div>
			        </div>
			        
		            <div class="form-group">
			            <label for="id_state" class="col-sm-3 control-label">Status</label>
			            <div class="col-sm-9">
			                {% render_field form.status class+="form-control status" tabindex="1" %}
			                {{ form.status.errors }}
		                </div>
		            </div>
	                <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9">
			                <input class="btn btn-primary" type="submit" value="Submit" />
			             </div>
			         </div>
		        {% endwith %}
            </form>
            {% else %}
                <h3>Are you sure you want to delete the testimonial?</h3>
                <p>
                    <dl>
                        <dt> User Name: </dt>
                        <dd> {{ instance.user_name }} </dd>
                        <dt> Short Description: </dt>
                        <dd> {{ instance.short_description }} </dd>
                        <dt> Created: </dt>
                        <dd> {{ instance.created }} </dd>
                        <dt> Last Updated: </dt>
                        <dd> {{ instance.updated }} </dd>
                    </dl>
                    <form action="{% url 'admin_testimonials_delete' instance.id %}" method="POST"> {% csrf_token %}
                        <input class="btn btn-danger" type="submit" value="Delete">
                        <a class="btn btn-default" href="{% url 'admin_testimonials' %}">Cancel</a>
                    </form>
                </p>
            {% endif%}
        </div>
    </div>
{% endblock %}
{% block compressinlinejsblock %}
    <script>
        $("#id_compn_type").change(function(){
            var component = $("#id_compn_type").val();
            if(component == 'video')
            {
                $("#cmpnt_desc").html("<strong>Only OGV format files accepted.</strong>")
            }
            else if(component == 'audio')
            {
                $("#cmpnt_desc").html("<strong>Only OGG format files accepted.</strong>")
            }
            else if(component == 'doc')
            {
                $("#cmpnt_desc").html("<strong>Only PDF format files accepted.</strong>")
            }
        });
    </script>
{% endblock %}
